

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      store/index.js - Documentation
  </title>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  
  <link type="text/css" rel="stylesheet" href="styles/collapse.css">
  

  

</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <i class="fas fa-home"></i>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      Portfolio Docs
    </h3>

    

    <h3>Modules</h3><ul><li id="Page-index-nav"><a href="module-Page-index.html">Page-index</a></li><li id="Page-login-nav"><a href="module-Page-login.html">Page-login</a></li><li id="Page-admin-nav"><a href="module-Page-admin.html">Page-admin</a><ul class='methods'><li data-type="method" id="Page-admin-saveContent-nav"><a href="module-Page-admin.html#saveContent">saveContent</a></li></ul></li><li id="Page-projects-nav"><a href="module-Page-projects.html">Page-projects</a><ul class='methods'><li data-type="method" id="Page-projects-handleProjectSort-nav"><a href="module-Page-projects.html#handleProjectSort">handleProjectSort</a></li><li data-type="method" id="Page-projects-editProject-nav"><a href="module-Page-projects.html#editProject">editProject</a></li><li data-type="method" id="Page-projects-handleDelete-nav"><a href="module-Page-projects.html#handleDelete">handleDelete</a></li><li data-type="method" id="Page-projects-deleteProject-nav"><a href="module-Page-projects.html#deleteProject">deleteProject</a></li><li data-type="method" id="Page-projects-updateProjectOrder-nav"><a href="module-Page-projects.html#updateProjectOrder">updateProjectOrder</a></li><li data-type="method" id="Page-projects-saveProject-nav"><a href="module-Page-projects.html#saveProject">saveProject</a></li><li data-type="method" id="Page-projects-setLastProjectActive-nav"><a href="module-Page-projects.html#setLastProjectActive">setLastProjectActive</a></li><li data-type="method" id="Page-projects-newProject-nav"><a href="module-Page-projects.html#newProject">newProject</a></li></ul></li><li id="Component-AdminNav-nav"><a href="module-Component-AdminNav.html">Component-AdminNav</a><ul class='methods'><li data-type="method" id="Component-AdminNav-signOut-nav"><a href="module-Component-AdminNav.html#signOut">signOut</a></li></ul></li><li id="Component-LoginForm-nav"><a href="module-Component-LoginForm.html">Component-LoginForm</a><ul class='methods'><li data-type="method" id="Component-LoginForm-signIn-nav"><a href="module-Component-LoginForm.html#signIn">signIn</a></li><li data-type="method" id="Component-LoginForm-signOut-nav"><a href="module-Component-LoginForm.html#signOut">signOut</a></li></ul></li><li id="Component-ProjectDetails-nav"><a href="module-Component-ProjectDetails.html">Component-ProjectDetails</a><ul class='methods'><li data-type="method" id="Component-ProjectDetails-date-nav"><a href="module-Component-ProjectDetails.html#date">date</a></li><li data-type="method" id="Component-ProjectDetails-addContainerForVideos-nav"><a href="module-Component-ProjectDetails.html#addContainerForVideos">addContainerForVideos</a></li><li data-type="method" id="Component-ProjectDetails-openProject-nav"><a href="module-Component-ProjectDetails.html#openProject">openProject</a></li><li data-type="method" id="Component-ProjectDetails-closeProject-nav"><a href="module-Component-ProjectDetails.html#closeProject">closeProject</a></li></ul></li><li id="Component-SwitchDarkMode-nav"><a href="module-Component-SwitchDarkMode.html">Component-SwitchDarkMode</a><ul class='methods'><li data-type="method" id="Component-SwitchDarkMode-toggleDarkMode-nav"><a href="module-Component-SwitchDarkMode.html#toggleDarkMode">toggleDarkMode</a></li></ul></li><li id="Component-SectionBio-nav"><a href="module-Component-SectionBio.html">Component-SectionBio</a></li><li id="Component-SectionExperience-nav"><a href="module-Component-SectionExperience.html">Component-SectionExperience</a></li><li id="Component-SectionFooter-nav"><a href="module-Component-SectionFooter.html">Component-SectionFooter</a></li><li id="Component-SectionLanding-nav"><a href="module-Component-SectionLanding.html">Component-SectionLanding</a></li><li id="Component-SectionProjects-nav"><a href="module-Component-SectionProjects.html">Component-SectionProjects</a><ul class='methods'><li data-type="method" id="Component-SectionProjects-padInt-nav"><a href="module-Component-SectionProjects.html#padInt">padInt</a></li><li data-type="method" id="Component-SectionProjects-openProject-nav"><a href="module-Component-SectionProjects.html#openProject">openProject</a></li></ul></li><li id="Component-SectionRecognition-nav"><a href="module-Component-SectionRecognition.html">Component-SectionRecognition</a></li><li id="Mixin-image-upload-nav"><a href="module-Mixin-image-upload.html">Mixin-image-upload</a><ul class='methods'><li data-type="method" id="Mixin-image-upload-uploadImage-nav"><a href="module-Mixin-image-upload.html#~uploadImage">uploadImage</a></li><li data-type="method" id="Mixin-image-upload-mixinRandomId-nav"><a href="module-Mixin-image-upload.html#~mixinRandomId">mixinRandomId</a></li></ul></li><li id="Middleware-router-auth-nav"><a href="module-Middleware-router-auth.html">Middleware-router-auth</a><ul class='methods'><li data-type="method" id="Middleware-router-auth-isAdminRoute-nav"><a href="module-Middleware-router-auth.html#~isAdminRoute">isAdminRoute</a></li></ul></li><li id="Store-nav"><a href="module-Store.html">Store</a><ul class='methods'><li data-type="method" id="Store-state-nav"><a href="module-Store.html#~state">state</a></li><li data-type="method" id="Store-Getters-nav"><a href="module-Store.html#~Getters">Getters</a></li><li data-type="method" id="Store-Mutations-firebaseMutations-nav"><a href="module-Store.html#~Mutations-firebaseMutations">Mutations-firebaseMutations</a></li><li data-type="method" id="Store-Mutations-setOwner-nav"><a href="module-Store.html#~Mutations-setOwner">Mutations-setOwner</a></li><li data-type="method" id="Store-Mutations-setDarkMode-nav"><a href="module-Store.html#~Mutations-setDarkMode">Mutations-setDarkMode</a></li><li data-type="method" id="Store-Actions-setDarkMode-nav"><a href="module-Store.html#~Actions-setDarkMode">Actions-setDarkMode</a></li><li data-type="method" id="Store-Actions-setProjects-nav"><a href="module-Store.html#~Actions-setProjects">Actions-setProjects</a></li><li data-type="method" id="Store-Actions-setContent-nav"><a href="module-Store.html#~Actions-setContent">Actions-setContent</a></li><li data-type="method" id="Store-Actions-signIn-nav"><a href="module-Store.html#~Actions-signIn">Actions-signIn</a></li><li data-type="method" id="Store-Actions-signOut-nav"><a href="module-Store.html#~Actions-signOut">Actions-signOut</a></li><li data-type="method" id="Store-Actions-uploadContentImage-nav"><a href="module-Store.html#~Actions-uploadContentImage">Actions-uploadContentImage</a></li></ul></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        store/index.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>/**
 * @module Store
 * @desc Vuex Store
 */
import Vuex from 'vuex'
import { firebaseMutations, firebaseAction } from 'vuexfire'
import { auth, db, storage } from '@/services/firebase-init.js'

db.settings({ timestampsInSnapshots: true })
const createStore = () => {
  return new Vuex.Store({
    /**
     * @method state
     * @desc
     * - `owner` - Stores authenticated user details
     * - `darkMode` - Stores boolean for dark mode theme
     * - `content` - Stores all website content, except projects
     * - `projects` - Stores content for all projects
     */
    state: {
      owner: null,
      darkMode: false,
      content: {},
      projects: {}
    },
    /**
     * @method Getters
     * @desc
     * - `owner` - returns `state.owner`
     * - `darkMode` - returns `state.darkMode`
     * - `content` - returns `state.content`
     * - `projects` - returns `state.projects`
     */
    getters: {
      owner: state => state.owner,
      darkMode: state => state.darkMode,
      content: state => state.content,
      projects: state => state.projects
    },
    mutations: {
      /**
       * @method Mutations-firebaseMutations
       * @desc Binding for Firestore
       */
      ...firebaseMutations,
      /**
       * @method Mutations-setOwner
       * @desc Stores authenticated user or owner's details in `state.owner`
       * @param {Object} state Vuex store state
       * @param {Boolean} owner Owner's details
       */
      setOwner(state, owner) {
        state.owner = owner
      },
      /**
       * @method Mutations-setDarkMode
       * @desc Sets boolean for dark mode
       * @param {Object} state Vuex store state
       * @param {Boolean} payload Dark mode theme state
       */
      setDarkMode(state, payload) {
        state.darkMode = payload
      }
    },
    actions: {
      /**
       * @method Actions-setDarkMode
       * @desc Commits `setDarkMode` with a boolean value
       * @param {Object} store Vuex store
       * @param {Boolean} payload Dark mode theme state
       */
      setDarkMode: (store, payload) => {
        if (typeof payload === 'boolean') {
          store.commit('setDarkMode', payload)
        }
      },
      /**
       * @method Actions-setProjects
       * @desc Firebase Action to bind `projects` ordered by `order` to `state.projects`
       * @returns {Promise}
       */
      setProjects: firebaseAction(({ bindFirebaseRef }) => {
        return new Promise((resolve, reject) => {
          bindFirebaseRef(
            'projects',
            db.collection('projects').orderBy('order')
          ).then(() => {
            resolve()
          })
        })
      }),
      /**
       * @method Actions-setContent
       * @desc Firebase Action to bind content with respective sections
       * @returns {Promise}
       */
      setContent: firebaseAction(({ bindFirebaseRef }) => {
        let sections = [
          'sectionLanding',
          'sectionBio',
          'sectionExperience',
          'sectionProjects',
          'sectionRecognition',
          'sectionFooter'
        ]
        return new Promise((resolve, reject) => {
          async function bindContent() {
            await Promise.all(
              sections.map(async section => {
                let key = 'content.' + section
                let ref = db.collection('content').doc(section)
                await bindFirebaseRef(key, ref)
              })
            )
            resolve()
          }
          bindContent()
        })
      }),
      /**
       * @method Actions-signIn
       * @desc Signs in user with email and password
       * @param {Object} {email,password} Email and password of the user
       * @returns {Promise}
       */
      signIn: (store, { email, password }) => {
        return new Promise((resolve, reject) => {
          auth
            .signInWithEmailAndPassword(email, password)
            .then(() => {
              resolve()
            })
            .catch(function(error) {
              reject(error)
            })
        })
      },
      /**
       * @method Actions-signOut
       * @desc Signs out authenticated user. Then commits `setOwner` to `null`
       * @param {Object} {commit} Vuex commit
       */
      signOut({ commit }) {
        auth
          .signOut()
          .then(() => {
            commit('setOwner', null)
          })
          .catch(error => console.log(error))
      },
      /**
       * @method Actions-uploadContentImage
       * @desc Uploads the image to Firebase Storage
       * @param {Object} store Vuex store
       * @param {Object} { file, fileName } File contents and file name
       * @returns {Promise}
       */
      uploadContentImage: (store, { file, fileName }) => {
        return new Promise((resolve, reject) => {
          var metadata = { contentType: 'image/jpeg' }
          var uploadTask = storage
            .ref()
            .child('content')
            .child('images/' + fileName)
            .put(file, metadata)
          uploadTask.on(
            'state_changed',
            function(snapshot) {
              // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded
              var progress =
                (snapshot.bytesTransferred / snapshot.totalBytes) * 100
              console.log('Upload is ' + progress + '% done')
              switch (snapshot.state) {
                case 'paused':
                  console.log('Upload is paused')
                  break
                case 'running':
                  console.log('Upload is running')
                  break
              }
            },
            function(error) {
              reject(error.code)
            },
            function() {
              // Upload completed successfully, now we can get the download URL
              uploadTask.snapshot.ref
                .getDownloadURL()
                .then(function(downloadURL) {
                  console.log('File available at', downloadURL)
                  resolve(downloadURL)
                })
              // console.log('uploadTask.snapshot', uploadTask.snapshot)
              // var downloadURL = uploadTask.snapshot.downloadURL
            }
          )
        })
      }
    }
  })
}
export default createStore
</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>
